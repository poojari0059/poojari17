#include <stdio.h>

B['(('];

A(char c[], int i)
{
   i=&c[i];
}
F(i){
    B[')'] =(i<'"'%'"')? A(~i,')'%'('):i;
}
 R(i,s)
{
    if (!i)
        return A(A(B['\\'],~A(s,s)),')'%'(');


    F(R(i, A(s,B[i=A(i,~!' ')])));
    int x=B[')'];
    F(R(i, s));

    return ((x<B[')'])?x:B[')']);
}

P()
{   T();
    B[B['\'']]=B[' '];
    B['\\']=A(B[B['\'']],B['\\']);
    if((B['\'']=A(B['\''],'"'%'!'))!= B[','])
    {
        P();
    }


}

W()
{
  T();
  B[',']=B[' '];
  P();
  printf("%d\n",A(R(B[','],'"'%'"'),B['\\'])>>')'%'(');
  B['\\']=B['\'']='"'%'"';
  if((B['.']=A(B['.'],'"'%'!'))!=B['"'])
    {
          W();
    }
}
T()
{
    scanf("%d",&B[' ']);

}
main()
{   T();
    B['"']=B[' '];
    W();
    exit('"'%'"');
}
